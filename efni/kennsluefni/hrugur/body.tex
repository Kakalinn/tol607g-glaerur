\title{Hrúgur}
\author{Bergur Snorrason}
\date{\today}

\begin{document}

\frame{\titlepage}

\section{Inngangur}
\env{frame}
{
    \frametitle{Hrúgur}
    \env{itemize}
    {
        \item<1-> Rótartvíundatré sem uppfyllir að sérhver nóða er stærri en börnin sín er sagt uppfylla \emph{hrúguskilyrðið}.
        \item<2-> Við köllum slík tré \emph{hrúgur} (e. \emph{heap}).
        \item<3-> Hrúgur eru heppilega auðveldar í útfærslu.
        \item<4-> Við geymum tréð sem fylki og eina erfiðið er að viðhalda hrúguskilyrðinu.
    }
}

\section{Útskýring á útfærslu trésins}
\env{frame}
{
    \env{itemize}
    {
        \item<1-> Þegar við geymum tréð sem fylki notum við eina af tveimur aðferðum.
        \item<2-> Sú fyrri:
        \env{itemize}
        {
            \item<3-> Rótin er í staki $1$ í fylkinu.
            \item<4-> Vinstra barn staks $i$ er stak $2 \cdot i$.
            \item<5-> Hægra barn staks $i$ er stak $2 \cdot i + 1$.
            \item<6-> Foreldri staks $i$ er stakið $\lfloor i/2 \rfloor$.
        }
        \item<7-> Sú seinni:
        \env{itemize}
        {
            \item<8-> Rótin er í staki $0$ í fylkinu.
            \item<9-> Vinstra barn staks $i$ er stak $2\cdot i + 1$.
            \item<10-> Hægra barn staks $i$ er stak $2\cdot i + 2$.
            \item<11-> Foreldri staks $i$ er stakið $\lfloor (i - 1)/2 \rfloor$.
        }
        \item<12-> Takið eftir í fyrri aðferðinni notum við ekki stak $0$ í fylkinu.
        \item<13-> Þetta má sjá sem bæði kost og galla.
        \item<14-> Það stak má nota til að geyma, til dæmis, stærðina á trénu.
    }
}

\section{Forgangsbiðraðir með hrúgum}
\env{frame}
{
    \env{itemize}
    {
        \item<1-> Bein afleiðing af hrúguskilyrðinu er að rótin er stærsta stakið í trénu.
        \item<2-> Við getum því alltaf fengið skjótan aðgang að stærsta stakinu í trénu.
        \item<3-> Algengt er að \emph{forgangsbiðraðir} (e. \emph{priority queues}) séu útfærðar með hrúgum.
    }
}

\section{Útfærlsa á hrúgum}
\env{frame}
{
    \selectcode{code/heap.c}{7}{40}
}

\section{Umræða um tímaflækjur}
\env{frame}
{
    \env{itemize}
    {
        \item<1-> Gerum ráð fyrir að við séum með $n$ stök í hrúgunni.
        \item<2-> Þá er hæð trésins $\mathcal{O}($\onslide<3->{$\log n$}$)$.
        \item<4-> Þar sem \ilcode{pop()} þarf aðeins að ferðast einu sinni niður að laufi er tímaflækjan $\mathcal{O}($\onslide<5->{$\log n$}$)$.
        \item<6-> Þar sem \ilcode{push(...)} þarf aðeins að ferðast einu sinni upp að rót er tímaflækjan $\mathcal{O}($\onslide<7->{$\log n$}$)$.
        \item<8-> Nú þarf \ilcode{peek()} ekki að gera annað en að lesa fremsta stakið í fylki svo tímaflækjan er $\mathcal{O}($\onslide<9->{$\,1\,$}$)$.
        \item<10-> Við getum útfært þetta með ítrun, í stað þess að nota endurkvæmni.
    }
}

\section{Ítruð útfærsla á hrúgum}
\env{frame}
{
    \selectcode{code/heap-iter.c}{12}{32}
}

\section{Þessi glæra er viljandi auð}
\env{frame}
{
}

\end{document}
